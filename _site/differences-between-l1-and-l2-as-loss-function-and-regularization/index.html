<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Differences between L1 and L2 as Loss Function and Regularization</title>
  <meta name="description" content="[2014/11/30: Updated the L1-norm vs L2-norm loss function via a programmatic validated diagram. Thanks readers for the pointing out the confusing diagram. Ne...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://ckieric.webfactional.com/differences-between-l1-and-l2-as-loss-function-and-regularization/">
  <link rel="alternate" type="application/rss+xml" title="" href="http://ckieric.webfactional.com/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/"></a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Differences between L1 and L2 as Loss Function and Regularization</h1>
    <p class="post-meta"><time datetime="2013-12-18T04:40:20-08:00" itemprop="datePublished">Dec 18, 2013</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">lo</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><em><span style="line-height: 1.714285714; font-size: 1rem;">[2014/11/30: Updated the L1-norm vs L2-norm loss function via a programmatic validated diagram. Thanks readers for the pointing out the confusing diagram. Next time I will not draw mspaint but actually plot it out.]</span></em></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">While practicing machine learning, you may have come upon a choice of the mysterious L1 vs L2. Usually the two decisions are : 1) L1-norm vs L2-norm loss function; and 2) L1-regularization vs L2-regularization.</span></p>

<h2 id="as-an-error-function">As An Error Function</h2>

<p>L1-norm loss function is also known as least absolute deviations (LAD), least absolute errors (LAE). It is basically minimizing the sum of the absolute differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>)</strong>):</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png" alt="l1-norm formula" width="170" height="50" /></a></p>

<p>L2-norm loss function is also known as least squares error (LSE). It is basically minimizing the sum of the square of the differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>):</strong></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png" alt="l2-norm formula" width="219" height="73" /></a></p>

<p>The differences of L1-norm and L2-norm as a loss function can be promptly summarized as follows:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png"><img class="alignnone size-full wp-image-229 aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png" alt="L1 vs L2 properties (loss function)" width="379" height="117" /></a></p>

<p><strong style="line-height: 1.714285714; font-size: 1rem;">Robustness</strong><span style="line-height: 1.714285714; font-size: 1rem;">, per wikipedia, is explained as:</span></p>

<blockquote>
  <p>The method of least absolute deviations finds applications in many areas, due to its robustness compared to the least squares method. Least absolute deviations is robust in that it is resistant to outliers in the data. This may be helpful in studies where outliers may be safely and effectively ignored. If it is important to pay attention to any and all outliers, the method of least squares is a better choice.</p>
</blockquote>

<p>Intuitively speaking, since a L2-norm squares the error (increasing by a lot if error &gt; 1), the model will see a much larger error ( e vs e^2 ) than the L1-norm, so the model is much more sensitive to this example, and adjusts the model to minimize this error. If this example is an outlier, the model will be adjusted to minimize this single outlier case, at the expense of many other common examples, since the errors of these common examples are small compared to that single outlier case.</p>

<p><strong>Stability</strong>, per wikipedia, is explained as:</p>

<blockquote>
  <p>The instability property of the method of least absolute deviations means that, for a small horizontal adjustment of a datum, the regression line may jump a large amount. The method has continuous solutions for some data configurations; however, by moving a datum a small amount, one could “jump past” a configuration which has multiple solutions that span a region. After passing this region of solutions, the least absolute deviations line has a slope that may differ greatly from that of the previous line. In contrast, the least squares solutions is stable in that, for any small adjustment of a data point, the regression line will always move only slightly; that is, the regression parameters are continuous functions of the data.</p>
</blockquote>

<p>Below is a diagram generated using a real data and a real fitted model:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png"><img class="aligncenter size-full wp-image-515" src="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png" alt="programmatic L1 vs L2 visualization" width="1096" height="716" srcset="http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png 1096w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-580x378.png 580w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-940x614.png 940w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-624x407.png 624w" sizes="(max-width: 1096px) 100vw, 1096px" /></a></p>

<p>The base model here used is a GradientBoostingRegressor, which can take in L1-norm and L2-norm loss functions. The green and red lines represent a model using L1-norm and L2-norm loss function respectively. A solid line represents the fitted model trained also with the outlier point (orange), and the dotted line represents the fitted model trained without the outlier point (orange).</p>

<p>I gradually move the outlier point from left to right, which it will be less “outlier” in the middle and more “outlier” at the left and right side. When the outlier point isless “outlier” (in the middle), L2-norm has less changes while the fitted line using L1-norm has more changes.</p>

<p>In the case of a more “outlier” point (upper left, lower right, where points are to the far left and far right), both norms still have big change, but again the L1-norm has more changes in general.</p>

<p>By visualizing data, we can get a better idea what stability is with respective to these two loss functions.</p>

<h2 id="as-regularization">As Regularization</h2>

<p>Regularization is a very important technique in machine learning to prevent overfitting. Mathematically speaking, it adds a <em>regularization</em> <em>term</em> in order to prevent the coefficients to fit so perfectly to overfit. The difference between the L1 and L2 is just that L2 is the sum of the square of the weights, while L1 is just the sum of the weights. As follows:</p>

<p>L1 regularization on least squares:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png"><img class="aligncenter size-full wp-image-420" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png" alt="least_squares_l1" width="518" height="74" /></a></p>

<p>L2 regularization on least squares:</p>

<p><a style="color: #0f3647; line-height: 24px;" href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png"><img class="aligncenter size-full wp-image-236" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png" alt="least_squares_l2" width="518" height="74" /></a></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">The difference between their properties can be promptly summarized as follows:</span></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png"><img class="aligncenter size-full wp-image-233" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png" alt="L1 vs L2 properties (regularization)" width="389" height="139" /></a></p>

<p><strong>Solution uniqueness</strong> is a simpler case but requires a bit of imagination. First, this picture below:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png" alt="L1-norm and L2-norm distance" width="246" height="248" /></a></p>

<p>The green line (L2-norm) is the unique shortest path, while the red, blue, yellow (L1-norm) are all same length (=12) for the same route. Generalizing this to n-dimensions. This is why L2-norm has unique solutions while L1-norm does not.</p>

<p><strong>Built-in feature selection</strong> is frequently mentioned as a useful property of the L1-norm, which the L2-norm does not. This is actually a result of the L1-norm, which tends to produces sparse coefficients (explained below). Suppose the model have 100 coefficients but only 10 of them have non-zero coefficients, this is effectively saying that “the other 90 predictors are useless in predicting the target values”. L2-norm produces non-sparse coefficients, so does not have this property.</p>

<p><strong>Sparsity</strong> refers to that only very few entries in a matrix (or vector) is non-zero. L1-norm has the property of producing many coefficients with zero values or very small values with few large coefficients.</p>

<p><strong>Computational efficiency.</strong> L1-norm does not have an analytical solution, but L2-norm does. This allows the L2-norm solutions to be calculated computationally efficiently. However, L1-norm solutions does have the sparsity properties which allows it to be used along with sparse algorithms, which makes the calculation more computationally efficient.</p>

<p>References:</p>

<p>[<em><span style="line-height: 1.714285714; font-size: 1rem;">[2014/11/30: Updated the L1-norm vs L2-norm loss function via a programmatic validated diagram. Thanks readers for the pointing out the confusing diagram. Next time I will not draw mspaint but actually plot it out.]</span></em></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">While practicing machine learning, you may have come upon a choice of the mysterious L1 vs L2. Usually the two decisions are : 1) L1-norm vs L2-norm loss function; and 2) L1-regularization vs L2-regularization.</span></p>

<h2 id="as-an-error-function-1">As An Error Function</h2>

<p>L1-norm loss function is also known as least absolute deviations (LAD), least absolute errors (LAE). It is basically minimizing the sum of the absolute differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>)</strong>):</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png" alt="l1-norm formula" width="170" height="50" /></a></p>

<p>L2-norm loss function is also known as least squares error (LSE). It is basically minimizing the sum of the square of the differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>):</strong></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png" alt="l2-norm formula" width="219" height="73" /></a></p>

<p>The differences of L1-norm and L2-norm as a loss function can be promptly summarized as follows:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png"><img class="alignnone size-full wp-image-229 aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png" alt="L1 vs L2 properties (loss function)" width="379" height="117" /></a></p>

<p><strong style="line-height: 1.714285714; font-size: 1rem;">Robustness</strong><span style="line-height: 1.714285714; font-size: 1rem;">, per wikipedia, is explained as:</span></p>

<blockquote>
  <p>The method of least absolute deviations finds applications in many areas, due to its robustness compared to the least squares method. Least absolute deviations is robust in that it is resistant to outliers in the data. This may be helpful in studies where outliers may be safely and effectively ignored. If it is important to pay attention to any and all outliers, the method of least squares is a better choice.</p>
</blockquote>

<p>Intuitively speaking, since a L2-norm squares the error (increasing by a lot if error &gt; 1), the model will see a much larger error ( e vs e^2 ) than the L1-norm, so the model is much more sensitive to this example, and adjusts the model to minimize this error. If this example is an outlier, the model will be adjusted to minimize this single outlier case, at the expense of many other common examples, since the errors of these common examples are small compared to that single outlier case.</p>

<p><strong>Stability</strong>, per wikipedia, is explained as:</p>

<blockquote>
  <p>The instability property of the method of least absolute deviations means that, for a small horizontal adjustment of a datum, the regression line may jump a large amount. The method has continuous solutions for some data configurations; however, by moving a datum a small amount, one could “jump past” a configuration which has multiple solutions that span a region. After passing this region of solutions, the least absolute deviations line has a slope that may differ greatly from that of the previous line. In contrast, the least squares solutions is stable in that, for any small adjustment of a data point, the regression line will always move only slightly; that is, the regression parameters are continuous functions of the data.</p>
</blockquote>

<p>Below is a diagram generated using a real data and a real fitted model:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png"><img class="aligncenter size-full wp-image-515" src="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png" alt="programmatic L1 vs L2 visualization" width="1096" height="716" srcset="http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png 1096w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-580x378.png 580w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-940x614.png 940w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-624x407.png 624w" sizes="(max-width: 1096px) 100vw, 1096px" /></a></p>

<p>The base model here used is a GradientBoostingRegressor, which can take in L1-norm and L2-norm loss functions. The green and red lines represent a model using L1-norm and L2-norm loss function respectively. A solid line represents the fitted model trained also with the outlier point (orange), and the dotted line represents the fitted model trained without the outlier point (orange).</p>

<p>I gradually move the outlier point from left to right, which it will be less “outlier” in the middle and more “outlier” at the left and right side. When the outlier point isless “outlier” (in the middle), L2-norm has less changes while the fitted line using L1-norm has more changes.</p>

<p>In the case of a more “outlier” point (upper left, lower right, where points are to the far left and far right), both norms still have big change, but again the L1-norm has more changes in general.</p>

<p>By visualizing data, we can get a better idea what stability is with respective to these two loss functions.</p>

<h2 id="as-regularization-1">As Regularization</h2>

<p>Regularization is a very important technique in machine learning to prevent overfitting. Mathematically speaking, it adds a <em>regularization</em> <em>term</em> in order to prevent the coefficients to fit so perfectly to overfit. The difference between the L1 and L2 is just that L2 is the sum of the square of the weights, while L1 is just the sum of the weights. As follows:</p>

<p>L1 regularization on least squares:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png"><img class="aligncenter size-full wp-image-420" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png" alt="least_squares_l1" width="518" height="74" /></a></p>

<p>L2 regularization on least squares:</p>

<p><a style="color: #0f3647; line-height: 24px;" href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png"><img class="aligncenter size-full wp-image-236" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png" alt="least_squares_l2" width="518" height="74" /></a></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">The difference between their properties can be promptly summarized as follows:</span></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png"><img class="aligncenter size-full wp-image-233" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png" alt="L1 vs L2 properties (regularization)" width="389" height="139" /></a></p>

<p><strong>Solution uniqueness</strong> is a simpler case but requires a bit of imagination. First, this picture below:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png" alt="L1-norm and L2-norm distance" width="246" height="248" /></a></p>

<p>The green line (L2-norm) is the unique shortest path, while the red, blue, yellow (L1-norm) are all same length (=12) for the same route. Generalizing this to n-dimensions. This is why L2-norm has unique solutions while L1-norm does not.</p>

<p><strong>Built-in feature selection</strong> is frequently mentioned as a useful property of the L1-norm, which the L2-norm does not. This is actually a result of the L1-norm, which tends to produces sparse coefficients (explained below). Suppose the model have 100 coefficients but only 10 of them have non-zero coefficients, this is effectively saying that “the other 90 predictors are useless in predicting the target values”. L2-norm produces non-sparse coefficients, so does not have this property.</p>

<p><strong>Sparsity</strong> refers to that only very few entries in a matrix (or vector) is non-zero. L1-norm has the property of producing many coefficients with zero values or very small values with few large coefficients.</p>

<p><strong>Computational efficiency.</strong> L1-norm does not have an analytical solution, but L2-norm does. This allows the L2-norm solutions to be calculated computationally efficiently. However, L1-norm solutions does have the sparsity properties which allows it to be used along with sparse algorithms, which makes the calculation more computationally efficient.</p>

<p>References:</p>

<p>](http://en.wikipedia.org/wiki/Least_absolute_deviations) [<em><span style="line-height: 1.714285714; font-size: 1rem;">[2014/11/30: Updated the L1-norm vs L2-norm loss function via a programmatic validated diagram. Thanks readers for the pointing out the confusing diagram. Next time I will not draw mspaint but actually plot it out.]</span></em></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">While practicing machine learning, you may have come upon a choice of the mysterious L1 vs L2. Usually the two decisions are : 1) L1-norm vs L2-norm loss function; and 2) L1-regularization vs L2-regularization.</span></p>

<h2 id="as-an-error-function-2">As An Error Function</h2>

<p>L1-norm loss function is also known as least absolute deviations (LAD), least absolute errors (LAE). It is basically minimizing the sum of the absolute differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>)</strong>):</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png" alt="l1-norm formula" width="170" height="50" /></a></p>

<p>L2-norm loss function is also known as least squares error (LSE). It is basically minimizing the sum of the square of the differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>):</strong></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png" alt="l2-norm formula" width="219" height="73" /></a></p>

<p>The differences of L1-norm and L2-norm as a loss function can be promptly summarized as follows:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png"><img class="alignnone size-full wp-image-229 aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png" alt="L1 vs L2 properties (loss function)" width="379" height="117" /></a></p>

<p><strong style="line-height: 1.714285714; font-size: 1rem;">Robustness</strong><span style="line-height: 1.714285714; font-size: 1rem;">, per wikipedia, is explained as:</span></p>

<blockquote>
  <p>The method of least absolute deviations finds applications in many areas, due to its robustness compared to the least squares method. Least absolute deviations is robust in that it is resistant to outliers in the data. This may be helpful in studies where outliers may be safely and effectively ignored. If it is important to pay attention to any and all outliers, the method of least squares is a better choice.</p>
</blockquote>

<p>Intuitively speaking, since a L2-norm squares the error (increasing by a lot if error &gt; 1), the model will see a much larger error ( e vs e^2 ) than the L1-norm, so the model is much more sensitive to this example, and adjusts the model to minimize this error. If this example is an outlier, the model will be adjusted to minimize this single outlier case, at the expense of many other common examples, since the errors of these common examples are small compared to that single outlier case.</p>

<p><strong>Stability</strong>, per wikipedia, is explained as:</p>

<blockquote>
  <p>The instability property of the method of least absolute deviations means that, for a small horizontal adjustment of a datum, the regression line may jump a large amount. The method has continuous solutions for some data configurations; however, by moving a datum a small amount, one could “jump past” a configuration which has multiple solutions that span a region. After passing this region of solutions, the least absolute deviations line has a slope that may differ greatly from that of the previous line. In contrast, the least squares solutions is stable in that, for any small adjustment of a data point, the regression line will always move only slightly; that is, the regression parameters are continuous functions of the data.</p>
</blockquote>

<p>Below is a diagram generated using a real data and a real fitted model:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png"><img class="aligncenter size-full wp-image-515" src="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png" alt="programmatic L1 vs L2 visualization" width="1096" height="716" srcset="http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png 1096w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-580x378.png 580w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-940x614.png 940w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-624x407.png 624w" sizes="(max-width: 1096px) 100vw, 1096px" /></a></p>

<p>The base model here used is a GradientBoostingRegressor, which can take in L1-norm and L2-norm loss functions. The green and red lines represent a model using L1-norm and L2-norm loss function respectively. A solid line represents the fitted model trained also with the outlier point (orange), and the dotted line represents the fitted model trained without the outlier point (orange).</p>

<p>I gradually move the outlier point from left to right, which it will be less “outlier” in the middle and more “outlier” at the left and right side. When the outlier point isless “outlier” (in the middle), L2-norm has less changes while the fitted line using L1-norm has more changes.</p>

<p>In the case of a more “outlier” point (upper left, lower right, where points are to the far left and far right), both norms still have big change, but again the L1-norm has more changes in general.</p>

<p>By visualizing data, we can get a better idea what stability is with respective to these two loss functions.</p>

<h2 id="as-regularization-2">As Regularization</h2>

<p>Regularization is a very important technique in machine learning to prevent overfitting. Mathematically speaking, it adds a <em>regularization</em> <em>term</em> in order to prevent the coefficients to fit so perfectly to overfit. The difference between the L1 and L2 is just that L2 is the sum of the square of the weights, while L1 is just the sum of the weights. As follows:</p>

<p>L1 regularization on least squares:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png"><img class="aligncenter size-full wp-image-420" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png" alt="least_squares_l1" width="518" height="74" /></a></p>

<p>L2 regularization on least squares:</p>

<p><a style="color: #0f3647; line-height: 24px;" href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png"><img class="aligncenter size-full wp-image-236" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png" alt="least_squares_l2" width="518" height="74" /></a></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">The difference between their properties can be promptly summarized as follows:</span></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png"><img class="aligncenter size-full wp-image-233" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png" alt="L1 vs L2 properties (regularization)" width="389" height="139" /></a></p>

<p><strong>Solution uniqueness</strong> is a simpler case but requires a bit of imagination. First, this picture below:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png" alt="L1-norm and L2-norm distance" width="246" height="248" /></a></p>

<p>The green line (L2-norm) is the unique shortest path, while the red, blue, yellow (L1-norm) are all same length (=12) for the same route. Generalizing this to n-dimensions. This is why L2-norm has unique solutions while L1-norm does not.</p>

<p><strong>Built-in feature selection</strong> is frequently mentioned as a useful property of the L1-norm, which the L2-norm does not. This is actually a result of the L1-norm, which tends to produces sparse coefficients (explained below). Suppose the model have 100 coefficients but only 10 of them have non-zero coefficients, this is effectively saying that “the other 90 predictors are useless in predicting the target values”. L2-norm produces non-sparse coefficients, so does not have this property.</p>

<p><strong>Sparsity</strong> refers to that only very few entries in a matrix (or vector) is non-zero. L1-norm has the property of producing many coefficients with zero values or very small values with few large coefficients.</p>

<p><strong>Computational efficiency.</strong> L1-norm does not have an analytical solution, but L2-norm does. This allows the L2-norm solutions to be calculated computationally efficiently. However, L1-norm solutions does have the sparsity properties which allows it to be used along with sparse algorithms, which makes the calculation more computationally efficient.</p>

<p>References:</p>

<p>[<em><span style="line-height: 1.714285714; font-size: 1rem;">[2014/11/30: Updated the L1-norm vs L2-norm loss function via a programmatic validated diagram. Thanks readers for the pointing out the confusing diagram. Next time I will not draw mspaint but actually plot it out.]</span></em></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">While practicing machine learning, you may have come upon a choice of the mysterious L1 vs L2. Usually the two decisions are : 1) L1-norm vs L2-norm loss function; and 2) L1-regularization vs L2-regularization.</span></p>

<h2 id="as-an-error-function-3">As An Error Function</h2>

<p>L1-norm loss function is also known as least absolute deviations (LAD), least absolute errors (LAE). It is basically minimizing the sum of the absolute differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>)</strong>):</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l1-norm-formula.png" alt="l1-norm formula" width="170" height="50" /></a></p>

<p>L2-norm loss function is also known as least squares error (LSE). It is basically minimizing the sum of the square of the differences <strong>(S)</strong> between the target value (<strong>Y<sub>i</sub></strong>) and the estimated values (<strong>f(x<sub>i</sub>):</strong></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/l2-norm-formula.png" alt="l2-norm formula" width="219" height="73" /></a></p>

<p>The differences of L1-norm and L2-norm as a loss function can be promptly summarized as follows:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png"><img class="alignnone size-full wp-image-229 aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-loss-function.png" alt="L1 vs L2 properties (loss function)" width="379" height="117" /></a></p>

<p><strong style="line-height: 1.714285714; font-size: 1rem;">Robustness</strong><span style="line-height: 1.714285714; font-size: 1rem;">, per wikipedia, is explained as:</span></p>

<blockquote>
  <p>The method of least absolute deviations finds applications in many areas, due to its robustness compared to the least squares method. Least absolute deviations is robust in that it is resistant to outliers in the data. This may be helpful in studies where outliers may be safely and effectively ignored. If it is important to pay attention to any and all outliers, the method of least squares is a better choice.</p>
</blockquote>

<p>Intuitively speaking, since a L2-norm squares the error (increasing by a lot if error &gt; 1), the model will see a much larger error ( e vs e^2 ) than the L1-norm, so the model is much more sensitive to this example, and adjusts the model to minimize this error. If this example is an outlier, the model will be adjusted to minimize this single outlier case, at the expense of many other common examples, since the errors of these common examples are small compared to that single outlier case.</p>

<p><strong>Stability</strong>, per wikipedia, is explained as:</p>

<blockquote>
  <p>The instability property of the method of least absolute deviations means that, for a small horizontal adjustment of a datum, the regression line may jump a large amount. The method has continuous solutions for some data configurations; however, by moving a datum a small amount, one could “jump past” a configuration which has multiple solutions that span a region. After passing this region of solutions, the least absolute deviations line has a slope that may differ greatly from that of the previous line. In contrast, the least squares solutions is stable in that, for any small adjustment of a data point, the regression line will always move only slightly; that is, the regression parameters are continuous functions of the data.</p>
</blockquote>

<p>Below is a diagram generated using a real data and a real fitted model:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png"><img class="aligncenter size-full wp-image-515" src="http://www.chioka.in/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png" alt="programmatic L1 vs L2 visualization" width="1096" height="716" srcset="http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization.png 1096w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-580x378.png 580w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-940x614.png 940w, http://ckieric.webfactional.com/wp-content/uploads/2013/12/programmatic-L1-vs-L2-visualization-624x407.png 624w" sizes="(max-width: 1096px) 100vw, 1096px" /></a></p>

<p>The base model here used is a GradientBoostingRegressor, which can take in L1-norm and L2-norm loss functions. The green and red lines represent a model using L1-norm and L2-norm loss function respectively. A solid line represents the fitted model trained also with the outlier point (orange), and the dotted line represents the fitted model trained without the outlier point (orange).</p>

<p>I gradually move the outlier point from left to right, which it will be less “outlier” in the middle and more “outlier” at the left and right side. When the outlier point isless “outlier” (in the middle), L2-norm has less changes while the fitted line using L1-norm has more changes.</p>

<p>In the case of a more “outlier” point (upper left, lower right, where points are to the far left and far right), both norms still have big change, but again the L1-norm has more changes in general.</p>

<p>By visualizing data, we can get a better idea what stability is with respective to these two loss functions.</p>

<h2 id="as-regularization-3">As Regularization</h2>

<p>Regularization is a very important technique in machine learning to prevent overfitting. Mathematically speaking, it adds a <em>regularization</em> <em>term</em> in order to prevent the coefficients to fit so perfectly to overfit. The difference between the L1 and L2 is just that L2 is the sum of the square of the weights, while L1 is just the sum of the weights. As follows:</p>

<p>L1 regularization on least squares:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png"><img class="aligncenter size-full wp-image-420" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l11.png" alt="least_squares_l1" width="518" height="74" /></a></p>

<p>L2 regularization on least squares:</p>

<p><a style="color: #0f3647; line-height: 24px;" href="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png"><img class="aligncenter size-full wp-image-236" src="http://www.chioka.in/wp-content/uploads/2013/12/least_squares_l2.png" alt="least_squares_l2" width="518" height="74" /></a></p>

<p><span style="line-height: 1.714285714; font-size: 1rem;">The difference between their properties can be promptly summarized as follows:</span></p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png"><img class="aligncenter size-full wp-image-233" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-vs-L2-properties-regularization.png" alt="L1 vs L2 properties (regularization)" width="389" height="139" /></a></p>

<p><strong>Solution uniqueness</strong> is a simpler case but requires a bit of imagination. First, this picture below:</p>

<p><a href="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png"><img class="aligncenter" src="http://www.chioka.in/wp-content/uploads/2013/12/L1-norm-and-L2-norm-distance.png" alt="L1-norm and L2-norm distance" width="246" height="248" /></a></p>

<p>The green line (L2-norm) is the unique shortest path, while the red, blue, yellow (L1-norm) are all same length (=12) for the same route. Generalizing this to n-dimensions. This is why L2-norm has unique solutions while L1-norm does not.</p>

<p><strong>Built-in feature selection</strong> is frequently mentioned as a useful property of the L1-norm, which the L2-norm does not. This is actually a result of the L1-norm, which tends to produces sparse coefficients (explained below). Suppose the model have 100 coefficients but only 10 of them have non-zero coefficients, this is effectively saying that “the other 90 predictors are useless in predicting the target values”. L2-norm produces non-sparse coefficients, so does not have this property.</p>

<p><strong>Sparsity</strong> refers to that only very few entries in a matrix (or vector) is non-zero. L1-norm has the property of producing many coefficients with zero values or very small values with few large coefficients.</p>

<p><strong>Computational efficiency.</strong> L1-norm does not have an analytical solution, but L2-norm does. This allows the L2-norm solutions to be calculated computationally efficiently. However, L1-norm solutions does have the sparsity properties which allows it to be used along with sparse algorithms, which makes the calculation more computationally efficient.</p>

<p>References:</p>

<p>](http://en.wikipedia.org/wiki/Least_absolute_deviations)](http://www.quora.com/Machine-Learning/What-is-the-difference-between-L1-and-L2-regularization) <a href="http://metaoptimize.com/qa/questions/5205/when-to-use-l1-regularization-and-when-l2">http://metaoptimize.com/qa/questions/5205/when-to-use-l1-regularization-and-when-l2</a></p>

  </div>

  <div id="disqus_thread"></div>
  <script>
      /**
       *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
       */
      /*
      var disqus_config = function () {
          this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      */
      (function() {  // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          
          s.src = '//log0.disqus.com/embed.js';
          
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading"></h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li></li>
          <li><a href="mailto:"></a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Things I left Hanging Around</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
